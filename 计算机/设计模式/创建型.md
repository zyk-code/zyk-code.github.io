# 创建型模式
## 单例模式
全局只存在一个实例对象，一般用于日志类。全局共享一个实例的方法和数据，可以节约内存简便一些操作。
1、懒汉模式：在类加载时持全局实例对象，线程安全但是无论是否使用都会存在该实例。
2、饿汉模式：在首次使用时创建实例对象，延迟加载但线程不安全，需要**双重检查锁定**。
```cpp
class Singleton {
public:
    // 懒汉模式
    static Singleton& getInstanceBeforeUse() {
        // 局部静态c++11特性
        static Singleton instance;
        return instance;
    }
    // 饿汉模式
    static Singleton& getInstanceAfterUse() {
        // 未进入临界区
        if (instance == nullptr) {
            // 双重检查锁定
            // 进入临界区
            std::lock_guard<std::mutex> lock(mutex);
            if(instance == nullptr){
                instance = new Singleton();
            }
        }
        return *instance;
    }
private:
    Singleton() {}  // 私有构造函数
    ~Singleton() {} // 私有析构函数
    Singleton(const Singleton&) = delete;            // 禁用拷贝构造函数
    Singleton& operator=(const Singleton&) = delete; // 禁用赋值操作
    static Singleton instance;                       // 单例实例
};

// Singleton* Singleton::instance = nullptr;
```
## 工厂模式

1、简单工厂模式：通过工厂类来创建对象，工厂类只负责创建对象，而不关心创建过程。