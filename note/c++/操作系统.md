## 操作系统 

OS是管理软件的一种软件

C程序与可以看成是一种状态机。因为每一步程序的执行都会是状态的变化，其中状态包括函数的栈帧、变量的值、PC等。

状态机是一个状态的集合，状态之间通过转移，来完成一个任务的过程。通俗的理解：A -> B -> C 就是一个简单的状态机。

系统调用（syscall）：系统处理状态转换的一种方式（本质也是一种状态机）。在不同平台实现的方式对应的不同汇编指令不同，存储系统调用参数的寄存器也不同，这是不同架构间的区别。

多发射，乱序执行，按序提交（处理器能看到即将进行的步骤，并且优化）。因此，多处理器丢失即时可见性。（宽松内存模型）。 

python的生成器可以看作线程or一个局部的状态机。

### peterson算法

一种互斥的约定算法，保证了原子性。store(设置标志表明要去竞争资源)和load(获取当前是否有人在使用资源，当没有人使用时由速度决定，因此是随机的)

```C
void TA(){
    while(1){
        x = 1;
        turn = B;   // sotre
        while(y && turn == B); // load
        use();  // 进入临界区
        x = 0;
    }
}
void TB(){
    while(1){
        y = 1;
        turn = A;
        while(x && turn == A);
        use();
        y = 0;
    }
}
```

## 线程/进程

## 锁
### 自旋锁



### 互斥锁